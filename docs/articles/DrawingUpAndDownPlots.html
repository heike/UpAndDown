<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drawing UpAndDown plots • UpAndDownPlots</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Drawing UpAndDown plots">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">UpAndDownPlots</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/DrawingUpAndDownPlots.html">Drawing UpAndDown plots</a>
    </li>
    <li>
      <a href="../articles/NestingYesOrNo.html">Nesting, Yes or No?</a>
    </li>
    <li>
      <a href="../articles/PreparingDataForUpAndDownPlots.html">Preparing data for UpAndDown plots</a>
    </li>
    <li>
      <a href="../articles/Sortings.html">Sortings</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Drawing UpAndDown plots</h1>
                        <h4 class="author">Antony Unwin</h4>
            
            <h4 class="date">2020-02-27</h4>
      
      
      <div class="hidden name"><code>DrawingUpAndDownPlots.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>When changes in cost-of-living indices are reported, so are major changes in the constituent items. Sometimes items with big percentage changes have small weight and do not affect the index as much as an item with a smaller change and a bigger weight. The same goes for stock market indices that include some very big firms as well as much smaller ones. Both percentage changes and absolute changes are needed for proper assessment. UpAndDown plots are designed to show both.</p>
</div>
<div id="first-upanddown-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#first-upanddown-plots" class="anchor"></a>First UpAndDown plots</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(UpAndDownPlots)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyverse)</a>
<a class="sourceLine" id="cb1-3" title="3">yy &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ud_prep.html">ud_prep</a></span>(CPIuk, <span class="dt">weight=</span><span class="st">"Weight"</span>, <span class="dt">v1=</span><span class="st">"Aug2017"</span>, <span class="dt">v2=</span><span class="st">"Aug2018"</span>, <span class="dt">levs=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Sector"</span>), <span class="dt">sortLev=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"orig"</span>))</a>
<a class="sourceLine" id="cb1-4" title="4">y1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ud_plot.html">ud_plot</a></span>(yy, <span class="dt">labelvar=</span><span class="st">"Sector"</span>)</a>
<a class="sourceLine" id="cb1-5" title="5">y1<span class="op">$</span>uad</a></code></pre></div>
<p><img src="DrawingUpAndDownPlots_files/figure-html/unnamed-chunk-1-1.png" width="672" style="display: block; margin: auto;"></p>
<p>Fig 1: An UpAndDown plot showing changes in the twelve sectors of the UK CPI (Consumer Price Index) between August 2017 and August 2018. The red dashed line shows the overall percentage change in the index over the year. The grey rectangles show the corresponding sector changes, where the height is percentage change and the width is the Sector’s contribution to the index in August 2017, so that the area displays the absolute change.</p>
<p>Sorting the sectors by percentage change and adding names is more informative and gives the next display, which has been rotated to make space for the labels.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">yw &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ud_prep.html">ud_prep</a></span>(CPIuk, <span class="dt">weight=</span><span class="st">"Weight"</span>, <span class="dt">v1=</span><span class="st">"Aug2017"</span>, <span class="dt">v2=</span><span class="st">"Aug2018"</span>, <span class="dt">levs=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Sector"</span>), <span class="dt">sortLev=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"perc"</span>))</a>
<a class="sourceLine" id="cb2-2" title="2">y2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ud_plot.html">ud_plot</a></span>(yw, <span class="dt">labelvar=</span><span class="st">"Sector"</span>)</a>
<a class="sourceLine" id="cb2-3" title="3">y2<span class="op">$</span>uadl</a></code></pre></div>
<p><img src="DrawingUpAndDownPlots_files/figure-html/unnamed-chunk-2-1.png" width="672" style="display: block; margin: auto;"> Fig 2: Changes in the UK CPI sorted by sectoral percentage changes. <code>Transport</code> is the largest sector and also where prices increased most. Prices in the sector <code>Miscellaneous goods and services</code> were the only ones that decreased.</p>
</div>
<div id="plotting-more-than-one-level" class="section level2">
<h2 class="hasAnchor">
<a href="#plotting-more-than-one-level" class="anchor"></a>Plotting more than one level</h2>
<p>Subsectors do not always behave as the sectors they belong to, so it is interesting to investigate subsectoral changes as well.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">yz &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ud_prep.html">ud_prep</a></span>(CPIuk, <span class="dt">weight=</span><span class="st">"Weight"</span>, <span class="dt">v1=</span><span class="st">"Aug2017"</span>, <span class="dt">v2=</span><span class="st">"Aug2018"</span>, <span class="dt">levs=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Sector"</span>, <span class="st">"Subsector"</span>), <span class="dt">sortLev=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"perc"</span>, <span class="st">"perc"</span>))</a>
<a class="sourceLine" id="cb3-2" title="2">y3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ud_plot.html">ud_plot</a></span>(yz, <span class="dt">labelvar=</span><span class="st">"Sector"</span>)</a>
<a class="sourceLine" id="cb3-3" title="3">y3<span class="op">$</span>uadl</a></code></pre></div>
<p><img src="DrawingUpAndDownPlots_files/figure-html/unnamed-chunk-3-1.png" width="672" style="display: block; margin: auto;"> Fig 3: The transparent blue rectangles for the subsectors have a similar structure to the grey ones for the sectors with the width being proportional to contribution, the height to the percentage change, and the area to the absolute change. One subsector in the sector <code>Recreation and culture</code> has a large decrease while all other subsectors there increased by more than the overall average. Percentage changes in <code>Clothing and footwear</code> subsectors differ little, while <code>Furniture, household equipment and maintenance</code> percentage changes differ a lot, as do those in <code>Miscellaneous goods and services</code>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#first-upanddown-plots">First UpAndDown plots</a></li>
      <li><a href="#plotting-more-than-one-level">Plotting more than one level</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Antony Unwin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
