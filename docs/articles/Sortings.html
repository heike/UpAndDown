<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sortings • UpAndDownPlots</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Sortings">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">UpAndDownPlots</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/DrawingUpAndDownPlots.html">Drawing UpAndDown plots</a>
    </li>
    <li>
      <a href="../articles/NestingYesOrNo.html">Nesting, Yes or No?</a>
    </li>
    <li>
      <a href="../articles/PreparingDataForUpAndDownPlots.html">Preparing data for UpAndDown plots</a>
    </li>
    <li>
      <a href="../articles/Sortings.html">Sortings</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Sortings</h1>
                        <h4 class="author">Antony Unwin</h4>
            
            <h4 class="date">2020-01-28</h4>
      
      
      <div class="hidden name"><code>Sortings.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Ordering and sorting are important tools in statistical graphics. Different arrangements offer different views of the data. In UpAndDown plots, the ordering of the grouping levels can have a big influence. In nested datasets, the order is given, but in non-nested ones the user has a choice. A display of changes by district within age and gender will look very different to a display of changes by age within district and gender.</p>
<p>The sortings of the individual levels can have a big influence too. There are five options offered in the UpAndDownPlots package for sorting levels: no sorting (“orig”, standing for the original order), sorting by intial value (“base”, i.e. baseline), sorting by final value (“final”), sorting by percentage change (“perc”), sorting by absolute change (“abs”). With all five options you can also request the sorting to be in the reverse order by using the reverse parameter.</p>
</div>
<div id="comparing-the-five-sortings" class="section level2">
<h2 class="hasAnchor">
<a href="#comparing-the-five-sortings" class="anchor"></a>Comparing the five sortings</h2>
<p>To see what difference another sorting method might make, you can draw a set of five plots for the same grouping variable, one for each sorting method, using the <code>sort5</code> function.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(UpAndDownPlots)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyverse)</a>
<a class="sourceLine" id="cb1-3" title="3">xs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sort5.html">sort5</a></span>(NIpop, <span class="dt">gvar=</span><span class="st">"LGD2014_name"</span>, <span class="dt">v1=</span><span class="st">"y2011"</span>, <span class="dt">v2=</span><span class="st">"y2017"</span>)</a>
<a class="sourceLine" id="cb1-4" title="4">gridExtra<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/gridExtra/topics/arrangeGrob">grid.arrange</a></span>(xs<span class="op">$</span>uadl)</a></code></pre></div>
<p><img src="Sortings_files/figure-html/unnamed-chunk-1-1.png" width="672" style="display: block; margin: auto;"></p>
<p>Fig 1: UpAndDown plots for the five standard sortings of the district variable in the Northern Ireland population dataset. Percentage change is often most useful, but absolute change can be relevant when there is a mixture of large and small categories. For this situation sorting by the initial value (‘base’) can also be worth trying to emphasise the larger categories.</p>
<p>The ‘orig’ option, meaning ‘no sorting’, can be used to apply sortings that are not included in the package. With the Northern Ireland population data it could be interesting to order the districts within age groups by the ordering for the oldest age group. The code first constructs a smaller dataset with that ordering and then a version of the original dataset with the new ordering.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">NIpopX &lt;-<span class="st"> </span>NIpop <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(age<span class="op">==</span><span class="st">"65+"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(LGD2014_name) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">s11=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(y2011), <span class="dt">s17=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(y2017), <span class="dt">rp=</span>s17<span class="op">/</span>s11<span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb2-2" title="2">NIpopX &lt;-<span class="st"> </span>NIpopX <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">LGD=</span><span class="kw">fct_reorder</span>(LGD2014_name, rp))</a>
<a class="sourceLine" id="cb2-3" title="3">NIpop1 &lt;-<span class="st"> </span>NIpop <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">LGD2014_name=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(LGD2014_name, <span class="dt">levels=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/levels">levels</a></span>(NIpopX<span class="op">$</span>LGD)))</a>
<a class="sourceLine" id="cb2-4" title="4">ww &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ud_prep.html">ud_prep</a></span>(NIpop1, <span class="dt">v1=</span><span class="st">"y2011"</span>, <span class="dt">v2=</span><span class="st">"y2017"</span>, <span class="dt">levs=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"age"</span>, <span class="st">"LGD2014_name"</span>), <span class="dt">sortLev=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"orig"</span>, <span class="st">"orig"</span>))</a>
<a class="sourceLine" id="cb2-5" title="5">w1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ud_plot.html">ud_plot</a></span>(ww, <span class="dt">labelvar=</span><span class="st">"age"</span>)</a>
<a class="sourceLine" id="cb2-6" title="6">w1<span class="op">$</span>uad</a></code></pre></div>
<p><img src="Sortings_files/figure-html/unnamed-chunk-2-1.png" width="672" style="display: block; margin: auto;"></p>
<p>Fig 2: An UpAndDown plot of percentage changes for districts by age groups, where the districts are sorted by the percentage changes for the oldest group. As Belfast has the lowest increase amongst the 65+ group it is relatively easy to pick out in the other age groups.</p>
<p>Choosing ‘no sorting’ for a variable means sticking with whatever the original ordering of the variable was. In the NIpop dataset the age variable has the groups “00-15”, “16-39”, “40-64”, “65+” and the default alphanumeric ordering keeps them in that order. If you had a variable Age with groups “child”, “young”, “middle-aged”, “old” in a data set Data1, then you would have to change the default ordering (which would put “young” last). You could do that like this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">Data1 &lt;-<span class="st"> </span>Data1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Age=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(Age, <span class="dt">levels=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"child"</span>, <span class="st">"young"</span>, <span class="st">"middle-aged"</span>, <span class="st">"old"</span>)))</a></code></pre></div>
</div>
<div id="keeping-track-of-the-percentages" class="section level2">
<h2 class="hasAnchor">
<a href="#keeping-track-of-the-percentages" class="anchor"></a>Keeping track of the percentages</h2>
<p>The percentage changes calculated depend on the grouping variables chosen and the order they are chosen in. The percentage changes used for sorting are calculated by the function <code>ud_prep</code> and are part of that output. The percentage changes drawn are calculated by <code>ud_plot</code> and are part of that function’s output.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#comparing-the-five-sortings">Comparing the five sortings</a></li>
      <li><a href="#keeping-track-of-the-percentages">Keeping track of the percentages</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Antony Unwin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
